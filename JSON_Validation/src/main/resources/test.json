{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Kombinierte JSON Schema Validation f√ºr ZahlungsAPI - Bankverbindung oder SepaMandat anlegen",
  "title": "ZahlungsAPI",
  "oneOf": [
    {
      "type": "object",
      "properties": {
        "zahlungsmittel": {
          "type": "object",
          "properties": {
            "bankverbindung": {
              "type": "object",
              "properties": {
                "iban": {
                  "type": "string",
                  "pattern": "^DE[0-9]{20}$"
                },
                "bic": {
                  "type": "string",
                  "pattern": "^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?$"
                },
                "kontonummer": {
                  "type": "integer",
                  "minimum": 100000,
                  "maximum": 9999999999
                },
                "bankleitzahl": {
                  "type": "integer",
                  "minimum": 10000000,
                  "maximum": 99999999
                },
                "bankname": {
                  "type": "string"
                },
                "gueltigAb": {
                  "type": "string",
                  "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
                },
                "gueltigBis": {
                  "type": "string",
                  "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
                },
                "abweichenderBankkundenname": {
                  "type": ["string", "null"]
                }
              },
              "required": [
                "iban",
                "bic",
                "gueltigAb"
              ]
            }
          },
          "required": ["bankverbindung"],
          "additionalProperties": false
        }
      },
      "required": ["zahlungsmittel"],
      "additionalProperties": false
    },
    {
      "type": "object",
      "properties": {
        "zahlungsmittel": {
          "type": "object",
          "properties": {
            "bankverbindung": {
              "type": "object",
              "properties": {
                "iban": {
                  "type": "string",
                  "pattern": "^DE[0-9]{20}$"
                },
                "bic": {
                  "type": "string",
                  "pattern": "^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?$"
                },
                "kontonummer": {
                  "type": "integer",
                  "minimum": 100000,
                  "maximum": 9999999999
                },
                "bankleitzahl": {
                  "type": "integer",
                  "minimum": 10000000,
                  "maximum": 99999999
                },
                "bankname": {
                  "type": "string"
                },
                "gueltigAb": {
                  "type": "string",
                  "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
                },
                "gueltigBis": {
                  "type": "string",
                  "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
                },
                "abweichenderBankkundenname": {
                  "type": ["string", "null"]
                }
              },
              "required": [
                "iban",
                "bankleitzahl",
                "gueltigAb"
              ]
            },
            "sepa-mandatsangaben": {
              "type": "object",
              "properties": {
                "gueltigAb": {
                  "type": "string",
                  "format": "date",
                  "formatMinimum": "2024-05-27"
                },
                "unterschriftsdatum": {
                  "type": "string",
                  "format": "date",
                  "formatMaximum": "2024-05-26"
                },
                "glaeubigerId": {
                  "type": "string"
                },
                "sequenztyp": {
                  "type": "string",
                  "enum": ["W"]
                },
                "mandatserzeugung": {
                  "type": "string",
                  "enum": ["EIN", "EZE"]
                },
                "mandatswiderruf": {
                  "type": "string",
                  "format": "date"
                },
                "basisFirmenlastschrift": {
                  "type": "string"
                },
                "verfallsdatum": {
                  "type": "string",
                  "format": "date"
                },
                "mandatsverfalldatum": {
                  "type": "string",
                  "format": "date"
                },
                "vorlauf": {
                  "type": "string"
                }
              },
              "required": [
                "gueltigAb",
                "unterschriftsdatum",
                "glaeubigerId",
                "sequenztyp",
                "mandatserzeugung"
              ]
            }
          },
          "required": ["bankverbindung", "sepa-mandatsangaben"],
          "additionalProperties": false
        }
      },
      "required": ["zahlungsmittel"],
      "additionalProperties": false
    }
  ]
}
